# Project Prompt Instructions

## 基本規範
- 所有 `prompt.md` 需直接在文件內完整貼上所引用的 `_core` 與 `_stylepacks` 模板內容，不得以連結、代碼或簡寫方式引用。
- 專案目錄內僅輸出 `prompt.md` 主檔；禁止生成 `meta.md` 或其他引用摘要檔案。
- 若需要新增重複使用的內容，請先確認是否已有對應模板，再決定是否撰寫新段落，並同樣完整內嵌於 `prompt.md`。
- 影片長度若未特別註明，預設為 **15 秒**，請在 Master Prompt 與分鏡區塊明確標記時間軸（建議 **12 幕 × 1.2s**）。
- 分鏡需維持 **Act → Beat → Angle** 的層級結構，並補齊運鏡、光影、聲音與轉場細節以利動畫工具解析。
- 專案請以「`<專案名稱>/<YYYY-MM-DD>_ep<集數>-<slug>`」的層級分類，建立 `prompt.md` 時務必放置於對應日期與集數資料夾內。
- 每次送進 Sora 的實際輸入文字長度，必須控制在 **10000～14500 個字元**（含空白與標點），以避免觸發 Sora 的長度上限。
- 建議在編輯器中以「字元數」為準進行自檢：低於 10000 視為資訊密度不足，高於 14500 禁止送出，需刪減或縮寫後再貼入。
- `prompt.md` 定義為 **專門送進 Sora 的最終稿**：預設整份文件都會貼入 Sora，主體聚焦在 `## SORA Prompt`（含 Context/Technical Summary/Master/Shots/Safety/Continuity），且 **整檔必須落在 10000～14500 字元內**。
- 僅供人類參考的附錄（如 AGENT Self-Check、Changelog、Next Episode）仍需保留在同一份 `prompt.md` 內，但必須改寫為 **超精簡 checklist 或 1–3 行摘要**，讓整檔維持在 10000～14500 字元範圍；若需要長敘述，請另建外部檔案，不要放入 `prompt.md`。
- 由於預設採用「A. 整份 `prompt.md` 都貼進 Sora」流程，所有段落（含 AGENT 類區塊）都會被計入字元限制，提交前務必以字元數檢查整檔不超標。
- **所有專案日期一律以 UTC+8（台灣時間）當下日期為準**：建立新專案時，需依當下 UTC+8 的日期決定檔名中的日期標記。
  - 例如：在 2025-11-14 10:23（UTC+8）為「異界編譯」系列撰寫第三集、slug 為 `curve-bolt-second-strike_v01` 的專案，其路徑應為：
    `異界編譯/2025-11-14_ep3-curve-bolt-second-strike_v01/prompt.md`

## 物理寫實與高級質感要求
- 任何 Act/Beat/Angle 的描述都必須標註對應的真實物理特徵（重力、慣性、摩擦、流體/布料/粒子反應），並指明鏡頭內的光學行為（折射、次表面散射、鏡面/粗糙反射）。
- 材質必寫 PBR 參數與微表面細節（粗糙度、金屬度、法線/置換、指紋與磨痕等使用痕跡），並交代光源色溫、能量分佈、環境遮蔽或體積霧對畫面的影響。
- 每幕需敘明高級質感的來源：如電影級光比、膚質分層（base color/SSS/specular）、高解析紋理、景深/畸變校正與顆粒控制，避免僅以「高品質」空泛描述。
- 以上物理與質感細節必須完整收錄在 `prompt.md` 的 Master Prompt 及各分鏡段落，不得省略或以「同前鏡」代稱。

## 風格擴充流程
- 遇到全新製片風格需求時，於對應 `prompt.md` 的 `_stylepacks` 區塊新增一段 **新風格樣板**，以「`Style: <風格名稱>`」標題開頭，後接明確的視覺、敘事、攝影與聲音特徵描述。
- 新風格樣板須標註適用情境與不可混用的限制，並附上 1～2 個代表性元素，方便後續檢索與一致化運用。
- 若新風格可能重複使用，可於內部知識庫另行保存同名樣板全文，但在專案倉庫內仍僅保留 `prompt.md`，以維持檔案規範。

## 行為與介面強化
- 產出前必須要求且檢查輸入欄位：`project_name`、`series_name/arc`、`episode_index`、`slug`、`target_platform`、`duration_sec`（預設 15）、`style_primary`、`style_secondary`、`worldstate_ref`、`goal`。
- 輸出僅能是一份完整的 `prompt.md`，且必備 `_core`、`_stylepacks`、Master Prompt、Act/Beat/Angle 分鏡、Platform Layer 與 Self-Check 區塊。
- 若劇情、世界觀或角色資訊有不確定處，禁止自行補完，必須在 `### Assumptions` 中列出假設並標註理由，供人類審核。
- 每份 `prompt.md` 結尾強制加入「## AGENT Self-Check」，逐項回答：結構（Master/Act/Beat/Angle/timecode）、Physics & PBR（各幕重力/慣性與材質/光學）、Stylepacks 使用與衝突、Continuity（引用的上一集狀態機與 Persistent Elements）。
- 每次提交前，Self-Check 必須主動揭露不足或不確定的項目，不得空白。

## 品質自檢清單（須全數達到 10/10）
1. **結構完整度**：Master Prompt 與分鏡層級是否齊全、時間軸是否明確。
2. **敘事一致性**：Act、Beat 與 Angle 描述是否連貫且符合風格樣板。
3. **視聽細節**：攝影、光影、聲音、轉場等是否具體、可操作。
4. **風格準確性**：引用或新增之 `_stylepacks` 是否貼合需求且無衝突。
5. **格式精準度**：段落、縮排、標點與命名是否符合專案規範。
6. **物理質感到位**：各幕是否寫明重力/慣性、布料或流體反應、光學行為與 PBR 材質參數，高級質感來源是否完整植入 Master Prompt 與分鏡。

每個項目須自評 10/10 後方可提交，並於提交前再次確認無遺漏檔案或未依規定建立資料夾階層。

## Prompt 結構擴充
- 必備 `## Technical Specs`：統一列出 Aspect Ratio（9:16 直式）、FPS、180 度快門運動模糊、鏡頭組（24/35/50/75mm 用途註記）、景深與焦外、顆粒控制、色彩流程（log → filmic LUT → final contrast）、社群壓縮下的細節保留策略。
- 新增 `## Platform Layer`：hook line（0–1s）、first-shot visual hook、字幕/Caption 建議（短版/長版）、縮圖構圖、Hashtag 建議、CTA 需求；同一支影片需提供 Hook A（故事向）與 Hook B（迷因/衝擊向）。
- `_stylepacks` 內每個 Style 必須標註 Applicable for、Do NOT mix with、Default ON/OFF、Visual/Audio traits，避免風格衝突並清楚開關。
- 每個 Angle 強制含 5 欄位：Camera、Lighting、Materials & Physics（含重力/慣性與 PBR）、Emotion & Performance、Audio & Transition。禁止以「同前」代稱。
- 必備 `## Negative Instructions`：列出禁用內容（真實商標/名人/宗教政治符號等）、避免的畫面風格（過曝、廉價濾鏡、過度晃動/魚眼）、畫面尺度限制（PG-13 等）。
- 在 `_core` 加入品牌層：品牌角色共同特徵、場景色調與光感、文案語氣（中日英混用節奏），作為全系列 Brand Bible。

## 連續劇集製作指引

### 定義連載骨架與狀態機
- 先於專案根目錄建立「系列主控稿」，以表格列出季別、集數、主要敘事弧線與每集 cliffhanger，並標註必備角色與道具狀態。
- 建立狀態機圖示：列出 Act → Beat → Angle 的狀態流轉與條件（如角色心境改變、場景轉換、時間跳躍），確保每集延續上一集的終止狀態。
- 每次新增劇集前，以上一集的終止節點為初始狀態，更新必須銜接的事件與限制，避免平行版本或情節矛盾。

### 維護共享世界與角色模板
- 在 `_core` 段落中維護世界觀設定與角色檔案，統一角色口頭禪、動作習慣、服裝色票與關鍵道具描述。
- 若角色或場景有變動（例如造型、武器、場景破壞），需在模板中標註有效集數與變動原因，並更新後續集數的預設狀態。
- 每次撰寫新集劇本時，直接複製最新模板，避免漏掉關鍵屬性或沿用過時資訊。

### 新動作前先複述前一鏡面狀態
- 在每個 Beat 開頭以 1～2 句重述上一鏡面（或上一集最後鏡面）的角色位置、情緒與環境條件，並標註與狀態機相符的節點 ID。
- 僅在確認重述完成後，才撰寫新的動作或對話指令；若須引入新元素，必須說明其與既有狀態的關聯。
- 對於多線敘事，分別記錄每條線的前一鏡面摘要，確保平行剪輯依然維持時間與邏輯一致。

### 攝影延續與轉場規劃
- 於 Master Prompt 中新增「Camera Continuity」子段落，明確記錄前一集結束時的鏡頭參數（焦距、機位、運鏡方向、光比）與延續需求。
- 對每個 Act 預先列出預計轉場（硬切、推拉、疊化、匹配剪接）與過渡鏡頭，確保跨集銜接時不產生突兀變化。
- 若須更換攝影語言，必須撰寫「轉換前置條件」，如劇情節點或視覺暗示，方便動畫師掌握節奏。

### 持續性要素清單
- 建立「Persistent Elements」表格，列出需跨集保留的 props、UI、字幕樣式、音樂動機與場景損毀狀態，並標註是否已使用、預計解除集數。
- 為每項要素附上視覺或聲音參考（色碼、音階、紋理描述），確保不同集數的 prompt 作者都能複製相同質感。
- 在每集交付前交叉檢查清單，若有新要素加入或舊要素退場，必須更新表格並在提交記錄中註明調整理由。

## Continuity Layer（連貫性強化規則）
- 每支 PV 在 Master 之前先定義「Continuity Layer」，鎖定軸線、光源、距離與狀態時間線，並在各 Beat 以「延續」語氣引用，避免鏡頭沙拉。
- 軸線鎖定：明示主角/BOSS 的左右位置、鏡頭主要站位（例如「蓮右側，蛇左側，鏡頭多在蓮右後 120° 弧線」），禁止跨軸造成左右互換。
- 鏡頭距離曲線：15s 影片每 Act 僅用 1–2 個焦段族群（Act I 24–35mm、Act II 35–50mm、Act III 50–75mm），三秒內避免廣角與長焦來回跳。
- 光源連貫：固定主光方向（如太陽在右上 45°），陰影方向一致；僅在漫畫格或特效模式下允許暫時風格化處理，之後回復原光位。
- 狀態時間線：
  - BOSS：明列每 4–5 秒的破壞 Stage（完整→裂紋→崩解），Beat 內引用 Stage 名稱，不重複定義破壞描述。
  - 主角：蓄壓條/傷勢/裝備亮度分段寫成時間軸，Beat 內直接標註所處階段（如「蓄壓 70%、護膝警示一次」）。
- Hook 政策：Baseline Master Prompt 保持線性敘事；若需 Hook 版（如先播擊殺再倒帶），必須拆成獨立段落或檔案 `hook_cut_prompt`，不得混寫於 baseline 時間線。
- Beat 寫法：
  - 每 Beat 開頭先重述與上一 Beat 的關係（軸線/光位/距離/Stage），再寫本幕唯一改動重點。
  - 仍需完整填寫 Camera、Lighting、Materials & Physics、Emotion & Performance、Audio & Transition；禁止用「同前鏡」代稱。

### Platform 與敘事迭代
- 每集結尾補充「Next Episode / Spin-off Ideas」：至少兩個主線延伸方向與一個番外/日常短片點子，方便回饋到下一集製作。
- 在 `prompt.md` 中新增「## Changelog vs Previous Episode」：記錄角色外觀變化、場景損毀狀態、登場/退場的道具或 UI、停用的招式與要素。
